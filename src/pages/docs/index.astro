---
import Layout from '../../layouts/Layout.astro';

const sections = [
	{
		title: 'Language fundamentals',
		description: 'Syntax, types, control flow, functions, closures, pattern matching, and macros.',
		items: [
			{ label: 'The Gene data structure & homoiconic design', href: '/docs/language/gene-type' },
			{ label: 'Types, variables & operators', href: '/docs/language/types' },
			{ label: 'Functions, closures & higher-order programming', href: '/docs/language/functions' },
			{ label: 'Classes, inheritance & abstract methods', href: '/docs/language/classes' },
			{ label: 'Enums, ranges & algebraic data types', href: '/docs/language/enums' },
			{ label: 'Pseudo macros & the $caller_eval API', href: '/docs/language/macros' },
		],
	},
	{
		title: 'Advanced features',
		description:
			'Generators, async/await, AOP decorators, modules, nil-safe navigation, and gradual typing.',
		items: [
			{ label: 'Generators — fn* and yield', href: '/docs/advanced/generators' },
			{ label: 'Async/await & futures', href: '/docs/advanced/async' },
			{ label: 'AOP — before/around/after advices & aspects', href: '/docs/advanced/aop' },
			{ label: 'Modules & namespaces', href: '/docs/advanced/modules' },
			{ label: 'Nil-safe navigation & selectors', href: '/docs/advanced/nil-safety' },
			{ label: 'Gradual typing & type annotations', href: '/docs/advanced/types' },
		],
	},
	{
		title: 'Runtime & architecture',
		description:
			'NaN-boxed VM internals, capability sandboxing, checkpoint/resume, threads, and WASM.',
		items: [
			{ label: 'NaN-boxed value system & bytecode VM', href: '/docs/runtime/vm' },
			{ label: 'Capability-based sandboxing', href: '/docs/runtime/capabilities' },
			{ label: 'Native threads & channels', href: '/docs/runtime/threads' },
			{ label: 'Checkpoint & resume — VM state serialization', href: '/docs/runtime/checkpoint' },
			{ label: 'Deterministic mode & seeded RNG', href: '/docs/runtime/deterministic' },
			{ label: 'WASM build & browser playground', href: '/docs/runtime/wasm' },
		],
	},
	{
		title: 'Standard library',
		description: 'Built-in functions, file I/O, string methods, and the tool calling API.',
		items: [
			{ label: 'Core — print, str, len, typeof, sqrt', href: '/docs/library/core' },
			{ label: 'File I/O — capability-gated fs/* functions', href: '/docs/library/fs' },
			{ label: 'Tool calling API', href: '/docs/library/tools' },
			{ label: 'String methods', href: '/docs/library/strings' },
		],
	},
];
---

<Layout
	title="Gene Documentation"
	description="Language guides, VM architecture, capability sandboxing, checkpoint/resume, and standard library references for the Gene programming language."
>
	<header class="page-header">
		<h1>Documentation</h1>
		<p>
			Gene is an AI-native language with a NaN-boxed bytecode VM, homoiconic design, capability
			sandboxing, generators, AOP decorators, and first-class async/await. The docs below cover the
			full feature set.
		</p>
		<div class="callout">
			<strong>Quick start</strong>
			<span>
				The authoritative feature reference is <code>examples/full.gene</code> in the repository — a
				700-line runnable file that covers every language feature with inline comments.
				Visit <a href="/examples">the Examples page</a> to run snippets live in your browser.
			</span>
		</div>
	</header>

	<section class="section-list">
		{sections.map((section) => (
			<article class="section-card">
				<h2>{section.title}</h2>
				<p>{section.description}</p>
				<ul>
					{section.items.map((item) => (
						<li>
							<a href={item.href}>{item.label}</a>
						</li>
					))}
				</ul>
			</article>
		))}
	</section>

	<section class="contribute">
		<h2>Help improve the docs</h2>
		<p>
			Found a gap? Open an issue or pull request. Contributions are welcome for tutorials,
			examples, and architecture notes.
		</p>
		<a class="button primary" href="https://github.com/gcao/genex" rel="noopener">Contribute on GitHub</a>
	</section>
</Layout>

<style>
	.page-header {
		display: grid;
		gap: 1rem;
		margin-bottom: 3rem;
	}

	.page-header h1 {
		margin: 0;
		font-size: clamp(2.1rem, 3vw, 2.7rem);
	}

	.page-header p {
		max-width: 50rem;
		color: var(--color-muted);
		margin: 0;
	}

	.callout {
		display: grid;
		gap: 0.35rem;
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: 1rem;
		padding: 1.2rem 1.5rem;
		box-shadow: 0 16px 30px rgba(15, 23, 42, 0.15);
		max-width: 50rem;
	}

	.callout strong {
		font-size: 0.85rem;
		letter-spacing: 0.08em;
		text-transform: uppercase;
		color: var(--color-muted);
	}

	.callout span {
		color: var(--color-muted);
	}

	.section-list {
		display: grid;
		gap: 1.5rem;
	}

	.section-card {
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: 1.1rem;
		padding: 1.7rem;
		box-shadow: 0 20px 32px rgba(15, 23, 42, 0.12);
		display: grid;
		gap: 1rem;
	}

	.section-card h2 {
		margin: 0;
		font-size: 1.5rem;
	}

	.section-card p {
		margin: 0;
		color: var(--color-muted);
	}

	.section-card ul {
		list-style: none;
		padding: 0;
		margin: 0;
		display: grid;
		gap: 0.6rem;
		columns: 2;
	}

	.section-card li {
		break-inside: avoid;
	}

	.section-card li a {
		color: var(--color-text);
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
		font-size: 0.95rem;
	}

	.section-card li a::after {
		content: '→';
		opacity: 0;
		transform: translateX(-6px);
		transition: opacity 0.15s ease, transform 0.15s ease;
	}

	.section-card li a:hover::after,
	.section-card li a:focus-visible::after {
		opacity: 1;
		transform: translateX(0);
	}

	.contribute {
		margin-top: 4rem;
		display: grid;
		gap: 1rem;
		max-width: 40rem;
	}

	.contribute p {
		color: var(--color-muted);
		margin: 0;
	}

	.button {
		border-radius: 999px;
		padding: 0.65rem 1.6rem;
		font-weight: 600;
		display: inline-flex;
		align-items: center;
		border: 1px solid transparent;
		background: var(--color-accent);
		color: white;
		box-shadow: 0 12px 24px rgba(37, 99, 235, 0.2);
	}

	@media (max-width: 600px) {
		.section-card ul {
			columns: 1;
		}
	}
</style>
