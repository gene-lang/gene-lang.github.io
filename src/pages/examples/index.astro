---
import Layout from '../../layouts/Layout.astro';

const examples = [
	{
		title: 'Loop-friendly accumulation',
		description: 'Use familiar loops and assignment to process data step by step.',
		code: `(fn sum [values]
  (var total 0)
  (for value in values
    (total = (+ total value)))
  total)

(var data [1 2 3 4 5])
(println "Total:" (sum data))`,
	},
	{
		title: 'Lightweight objects',
		description: 'Define small classes with methods and stateful properties.',
		code: `(class Counter
  (.ctor []
    (/value = 0))

  (.fn inc []
    (/value = (+ /value 1))
    /value))

(var counter (new Counter))
(counter .inc)
(println "Counter value:" (counter .inc))`,
	},
	{
		title: 'Async counters',
		description: 'Compose asynchronous work with futures and await.',
		code: `(fn count_async [max]
  (async
    (do
      (var count 0)
      (while (< count max)
        (count = (+ count 1)))
      count)))

(var result (await (count_async 3)))
(println "Finished at:" result)`,
	},
];
---

<Layout
	title="Gene Code Examples"
	description="Curated Gene code snippets that demonstrate looping, lightweight objects, and async workflows."
>
	<header class="page-header">
		<h1>Examples</h1>
		<p>
			Browse a curated gallery of Gene programs. Each snippet highlights a language feature, pairing the code with a
			short explanation. Run them locally with the Gene CLI to experiment on your own machine.
		</p>
	</header>

	<section class="example-grid">
		{examples.map((example) => (
			<article class="example-card">
				<h2>{example.title}</h2>
				<p>{example.description}</p>
				<pre aria-label={`Example: ${example.title}`}>
<code class="language-gene">{example.code}</code>
				</pre>
			</article>
		))}
	</section>

	<section class="note">
		<strong>No in-browser execution.</strong>
		<span>
			For safety, Gene snippets are rendered statically. Copy a snippet into a <code>.gene</code> file and run it
			with <code>./bin/gene run</code> to explore the output.
		</span>
	</section>
</Layout>

<style>
	.page-header {
		display: grid;
		gap: 0.75rem;
		margin-bottom: 3rem;
	}

	.page-header h1 {
		margin: 0;
		font-size: clamp(2.1rem, 3vw, 2.7rem);
	}

	.page-header p {
		color: var(--color-muted);
		max-width: 46rem;
		margin: 0;
	}

	.example-grid {
		display: grid;
		gap: 2rem;
	}

	.example-card {
		background: var(--color-surface);
		border-radius: 1.1rem;
		border: 1px solid var(--color-border);
		padding: 1.75rem;
		box-shadow: 0 18px 32px rgba(15, 23, 42, 0.12);
		display: grid;
		gap: 0.75rem;
	}

	.example-card h2 {
		margin: 0;
		font-size: 1.45rem;
	}

	.example-card p {
		margin: 0;
		color: var(--color-muted);
	}

	.note {
		margin-top: 3rem;
		display: grid;
		gap: 0.4rem;
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: 1rem;
		padding: 1.2rem 1.5rem;
		color: var(--color-muted);
	}
</style>
