---
import Layout from '../../layouts/Layout.astro';

const examples = [
	{
		title: 'Composable pipelines',
		description: 'Chain data transformations with clear, declarative macros.',
		code: `(defmacro pipeline [value &steps]
  (reduce (fn [acc step] (list (first step) acc (rest step)))
          value
          steps))

(let result
  (pipeline [1 2 3 4 5]
    (map (fn [x] (* x 2)))
    (filter (fn [x] (> x 6)))
    (reduce + 0)))

(print "Sum:" result)`,
	},
	{
		title: 'Pattern matching on values',
		description: 'Express branching logic with clear pattern matching.',
		code: `(fn describe-number [x]
  (match x
    1 "one"
    2 "two"
    3 "three"
    _ "many"))

(print "Description:" (describe-number 5))`,
	},
	{
		title: 'Async workflows',
		description: 'Execute asynchronous operations with Gene\'s async system.',
		code: `(fn delayed-message [msg delay-ms]
  (gene/sleep_async delay-ms)
  (on_success msg))

(let future (delayed-message "Hello from async!" 1000))
(future .on_success (fnx []
  (print "Message received:")))

(gene/sleep 1500)  # Wait for async operation`,
	},
];
---

<Layout
	title="Gene Code Examples"
	description="Curated Gene code snippets that demonstrate idiomatic use of macros, pattern matching, and async workflows."
>
	<header class="page-header">
		<h1>Examples</h1>
		<p>
			Browse a curated gallery of Gene programs. Each snippet highlights a language feature, pairing the code with a
			short explanation. Run them locally with the Gene CLI to experiment on your own machine.
		</p>
	</header>

	<section class="example-grid">
		{examples.map((example) => (
			<article class="example-card">
				<h2>{example.title}</h2>
				<p>{example.description}</p>
				<pre aria-label={`Example: ${example.title}`}>
<code class="language-gene">{example.code}</code>
				</pre>
			</article>
		))}
	</section>

	<section class="note">
		<strong>No in-browser execution.</strong>
		<span>
			For safety, Gene snippets are rendered statically. Copy a snippet into a <code>.gene</code> file and run it
			with <code>./bin/gene run</code> to explore the output.
		</span>
	</section>
</Layout>

<style>
	.page-header {
		display: grid;
		gap: 0.75rem;
		margin-bottom: 3rem;
	}

	.page-header h1 {
		margin: 0;
		font-size: clamp(2.1rem, 3vw, 2.7rem);
	}

	.page-header p {
		color: var(--color-muted);
		max-width: 46rem;
		margin: 0;
	}

	.example-grid {
		display: grid;
		gap: 2rem;
	}

	.example-card {
		background: var(--color-surface);
		border-radius: 1.1rem;
		border: 1px solid var(--color-border);
		padding: 1.75rem;
		box-shadow: 0 18px 32px rgba(15, 23, 42, 0.12);
		display: grid;
		gap: 0.75rem;
	}

	.example-card h2 {
		margin: 0;
		font-size: 1.45rem;
	}

	.example-card p {
		margin: 0;
		color: var(--color-muted);
	}

	.note {
		margin-top: 3rem;
		display: grid;
		gap: 0.4rem;
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: 1rem;
		padding: 1.2rem 1.5rem;
		color: var(--color-muted);
	}
</style>
