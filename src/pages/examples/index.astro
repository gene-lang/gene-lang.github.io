---
import Layout from '../../layouts/Layout.astro';

const examples = [
	{
		title: 'Gene Data Structure',
		description: 'The unique Gene data structure combines type, properties, and children in one unified format.',
		code: `# Gene's unified data structure: (type ^prop value child1 child2)
(var user (User ^id 123 ^active true "Alice" "alice@example.com"))

# Access with / operator
(println user/id)       # => 123
(println user/active)   # => true

# Properties are key-value pairs, children are positional
(var config (Config ^env "production" ^debug false "database" "cache"))`,
	},
	{
		title: 'Code as Data (Homoiconic)',
		description: 'Code and data share the same structure, enabling powerful metaprogramming.',
		code: `# This is data - use backtick to quote
(var person \\\`(Person ^name "Alice" ^age 30))

# This is code (same structure!)
(fn greet [person: Any]
  ^description "Greet a person"
  (println "Hello," person/name)
)

# Manipulate code as data
(var expr \\\`(if (x > 0) "positive" else "negative"))
(println "Expression type:" expr/.type)     # => if
(println "First child:" expr/.children/0)   # => (x > 0)`,
	},
	{
		title: 'Collection Methods',
		description: 'Built-in collection methods make data processing elegant and functional.',
		code: `# Array methods: .map, .filter, .reduce
(var numbers [1 2 3 4 5])

# Transform each element
(var doubled (numbers .map (fn [x: Int] -> Int (x * 2))))
# => [2 4 6 8 10]

# Filter by condition
(var big (numbers .filter (fn [x] (x > 2))))
# => [2 4]

# Reduce to single value
(var sum (numbers .reduce 0 (fn [acc: Int x: Int] -> Int (acc + x))))
# => 15

# Two-step pipeline
(var filtered (numbers .filter (fn [x] (x > 2))))
(var result (filtered .map (fn [x] (x * 3))))`,
	},
	{
		title: 'Functions with Metadata',
		description: 'Functions can include metadata like ^intent and ^examples for documentation.',
		code: `# Function with intent and examples metadata
(fn factorial [n: Int] -> Int
  ^description "Computes factorial recursively"
  ^intent "Calculate n! = n * (n-1) * ... * 1"
  ^examples [
    {^input 5 ^output 120}
    {^input 0 ^output 1}
  ]
  (if (n <= 1)
    1
  else
    (n * (factorial (n - 1)))
  )
)

# Run examples with: gene run-examples factorial.gene
# This validates the function against its ^examples`,
	},
	{
		title: 'Class Inheritance & OOP',
		description: 'Object-oriented programming with classes, inheritance, and methods.',
		code: `# Base class
(class Animal
  (ctor [name: String]
    (/name = name)
  )
  (method speak _
    (println /name "makes a sound")
  )
)

# Derived class with inheritance
(class Dog < Animal
  (ctor [name: String breed: String]
    (super .ctor name)  # Call parent constructor
    (/breed = breed)
  )
  (method speak _
    (println /name "barks! Breed:" /breed)
  )
)

(var dog (new Dog "Max" "Golden Retriever"))
(dog .speak)  # => Max barks! Breed: Golden Retriever`,
	},
	{
		title: 'Dynamic Property Access',
		description: 'Access object properties and array indices dynamically at runtime.',
		code: `# Dynamic array access
(var arr [10 20 30 40])
(var index 2)
(println arr/index)  # => 30 (same as arr/2)

# Dynamic map access
(var person {^name "Alice" ^age 30 ^city "NYC"})
(var key \\\`age)
(println person/key)  # => 30

# Nested dynamic access
(var data {^users [{^name "Alice"} {^name "Bob"}]})
(var i 0)
(println data/users/i/name)  # => Alice

# Use with collection methods
(var fields [\\\`name \\\`age \\\`city])
(fields .map (fn [field: Any] -> Any (person/field)))`,
	},
];
---

<Layout
	title="Gene Code Examples"
	description="Curated Gene code snippets that demonstrate looping, lightweight objects, and async workflows."
>
	<header class="page-header">
		<h1>Examples</h1>
		<p>
			Explore Gene's AI-friendly design through practical examples. Each snippet showcases how Gene's homoiconic structure makes it ideal for code generation, transformation, and AI reasoning. The uniform syntax pattern makes it predictable for both humans and AI systems.
		</p>
	</header>

	<section class="example-grid">
		{examples.map((example) => (
			<article class="example-card">
				<h2>{example.title}</h2>
				<p>{example.description}</p>
				<pre aria-label={`Example: ${example.title}`}>
<code class="language-gene">{example.code}</code>
				</pre>
			</article>
		))}
	</section>

	<section class="note">
		<strong>AI-First Design Benefits</strong>
		<span>
			Notice how every Gene construct follows the same pattern: <code>(type ^properties children)</code>.
			This consistency makes Gene perfect for AI code generation and reasoning. Try copying a snippet
			into a <code>.gene</code> file and run it with <code>./bin/gene run</code> to see it in action.
		</span>
	</section>
</Layout>

<style>
	.page-header {
		display: grid;
		gap: 0.75rem;
		margin-bottom: 3rem;
	}

	.page-header h1 {
		margin: 0;
		font-size: clamp(2.1rem, 3vw, 2.7rem);
	}

	.page-header p {
		color: var(--color-muted);
		max-width: 46rem;
		margin: 0;
	}

	.example-grid {
		display: grid;
		gap: 2rem;
	}

	.example-card {
		background: var(--color-surface);
		border-radius: 1.1rem;
		border: 1px solid var(--color-border);
		padding: 1.75rem;
		box-shadow: 0 18px 32px rgba(15, 23, 42, 0.12);
		display: grid;
		gap: 0.75rem;
	}

	.example-card h2 {
		margin: 0;
		font-size: 1.45rem;
	}

	.example-card p {
		margin: 0;
		color: var(--color-muted);
	}

	.note {
		margin-top: 3rem;
		display: grid;
		gap: 0.4rem;
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: 1rem;
		padding: 1.2rem 1.5rem;
		color: var(--color-muted);
	}
</style>
