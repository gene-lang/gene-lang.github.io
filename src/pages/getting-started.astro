---
import Layout from '../layouts/Layout.astro';
---

<Layout
	title="Getting Started with Gene"
	description="Install the Gene toolchain, build the compiler, and run your first program in minutes."
>
	<section class="hero">
		<h1>Getting started</h1>
		<p class="intro">
			Follow the steps below to install the Gene runtime, compile from source, and run your first program. Gene
			builds on Nim, so the same instructions work across macOS, Linux, and Windows.
		</p>
		<div class="quick-actions">
                        <a class="button primary" href="https://github.com/gene-lang/gene" rel="noopener">View source on GitHub</a>
			<a class="button secondary" href="/docs">Explore documentation</a>
		</div>
	</section>

	<section class="step">
		<h2>1. Install prerequisites</h2>
		<ul>
			<li>
				Install <a href="https://nim-lang.org/install.html" rel="noopener">Nim 1.6 or newer</a> with your preferred
				package manager.
			</li>
			<li>Ensure a C compiler is available (`clang`, `gcc`, or the MSVC toolchain on Windows).</li>
			<li>Optional but recommended: install <code>git</code> to fetch updates.</li>
		</ul>
	</section>

	<section class="step">
		<h2>2. Clone the repository</h2>
		<pre aria-label="Clone the Gene repository">
<code class="language-bash">git clone https://github.com/gene-lang/gene.git
cd gene</code>
		</pre>
		<p>If you are contributing, fork the repository first and add your fork as the origin remote.</p>
	</section>

	<section class="step">
		<h2>3. Build the Gene compiler</h2>
		<p>
			Gene ships as a Nim project. Use the bundled <code>nimble</code> tasks to build the bytecode VM and tooling.
		</p>
		<pre aria-label="Build the Gene executable">
<code class="language-bash"># Standard build
nimble build

# Optimized build (native flags, release mode)
nimble speedy</code>
		</pre>
		<p>
			The compiled binary is placed in <code>bin/gene</code>. You can also build directly with Nim for faster
			iterative development:
		</p>
		<pre aria-label="Alternative Nim build command">
<code class="language-bash">nim c -o:bin/gene src/gene.nim</code>
		</pre>
	</section>

	<section class="step">
		<h2>4. Verify your installation</h2>
		<p>Run the CLI to confirm everything is wired up:</p>
		<pre aria-label="Verify the Gene CLI">
<code class="language-bash">./bin/gene help
./bin/gene eval '(+ 1 2 3)'</code>
		</pre>
		<p>
			Gene provides five main commands:
		</p>
		<ul>
			<li><code>run <file></code> — parse, compile (with GIR caching), and execute a <code>.gene</code> program</li>
			<li><code>eval <code></code> — evaluate inline Gene code or read from stdin</li>
			<li><code>repl</code> — interactive REPL with multi-line input</li>
			<li><code>parse <file | code></code> — parse source and print the AST</li>
			<li><code>compile</code> — compile to bytecode or GIR format</li>
		</ul>
		<p>
			Compiled IR is cached in the <code>build/</code> directory for faster subsequent runs. Use <code>--no-gir-cache</code> to skip caching.
		</p>
	</section>

	<section class="step">
		<h2>5. Run your first program</h2>
		<p>Create a file named <code>hello.gene</code> with the following contents:</p>
		<pre aria-label="Hello world in Gene">
<code class="language-gene"># hello.gene
(print "Hello from Gene!")</code>
		</pre>
		<p>Execute the program with:</p>
		<pre aria-label="Run a Gene program">
<code class="language-bash">./bin/gene run hello.gene</code>
		</pre>
	</section>

	<section class="step">
		<h2>6. Explore Gene's unique features</h2>
		<p>Gene's power comes from its unified data structure. Try these examples to see it in action:</p>

		<h3>The Gene Data Structure</h3>
		<pre aria-label="Gene data structure example">
<code class="language-gene"># data.gene - Gene combines type, properties, and children
(User ^id 123 ^active true "Alice" "alice@example.com" 30)

# This represents a User with:
# - Type: User
# - Properties: id=123, active=true
# - Children: "Alice", "alice@example.com", 30</code>
		</pre>

		<h3>Functions and Control Flow</h3>
		<pre aria-label="Gene functions example">
<code class="language-gene"># functions.gene - Define and use functions
(fn greet [name]
  ^description "Greets a person by name"
  (str "Hello, " name "!"))

(fn factorial [n]
  (if (< n 2)
    1
    (* n (factorial (- n 1)))))

(print (greet "World"))
(print "5! =" (factorial 5))</code>
		</pre>

		<h3>Async Programming</h3>
		<pre aria-label="Gene async example">
<code class="language-gene"># async.gene - Real async/await support
(async fn delay [ms]
  (await (sleep ms))
  (print "Waited" ms "milliseconds"))

(async fn main []
  (print "Starting...")
  (await (delay 1000))
  (print "Done!"))

(main)</code>
		</pre>
	</section>

	<section class="step">
		<h2>Where to go next</h2>
		<ul class="next-steps">
			<li>
				Read the <a href="/docs">documentation</a> for macros, classes, and advanced async patterns.
			</li>
			<li>Browse the <a href="/examples">examples gallery</a> for idiomatic patterns and AI-friendly code structures.</li>
			<li>
				Experiment with Gene's homoiconic design — try generating code programmatically using the same data structures.
			</li>
			<li>
				Check <code>gene/docs/</code> in the repository for additional architecture and design documents.
			</li>
		</ul>
	</section>
</Layout>

<style>
	.hero {
		display: grid;
		gap: 1.5rem;
		margin-bottom: 2rem;
	}

	.hero h1 {
		font-size: clamp(2rem, 3vw, 2.6rem);
		margin: 0;
	}

	.intro {
		margin: 0;
		max-width: 44rem;
		color: var(--color-muted);
		font-size: 1.05rem;
	}

	.quick-actions {
		display: flex;
		gap: 1rem;
		flex-wrap: wrap;
	}

	.button {
		border-radius: 999px;
		padding: 0.65rem 1.6rem;
		font-weight: 600;
		display: inline-flex;
		align-items: center;
		border: 1px solid transparent;
	}

	.button.primary {
		background: var(--color-accent);
		color: white;
		box-shadow: 0 12px 24px rgba(37, 99, 235, 0.2);
	}

	.button.secondary {
		border: 1px solid var(--color-border);
		color: var(--color-text);
	}

	.step {
		margin-top: 3rem;
	}

	.step h2 {
		margin-bottom: 0.75rem;
		font-size: 1.6rem;
	}

	.step h3 {
		margin-top: 1.5rem;
		margin-bottom: 0.5rem;
		font-size: 1.2rem;
		color: var(--color-accent);
	}

	.step p {
		color: var(--color-muted);
		max-width: 46rem;
	}

	.step ul {
		list-style: disc;
		padding-left: 1.2rem;
		color: var(--color-muted);
		display: grid;
		gap: 0.5rem;
	}

	.next-steps {
		list-style: disc;
		padding-left: 1.2rem;
		color: var(--color-muted);
		display: grid;
		gap: 0.4rem;
		max-width: 44rem;
	}

	pre {
		margin-top: 1rem;
	}
</style>
